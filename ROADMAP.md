# antimon Development Roadmap

## Current Status (2025-07-22)

### Recent Achievements:
- ‚úÖ **v0.2.12 (In Progress)**: Enhanced success messages showing detailed information about what was checked
- ‚úÖ **v0.2.11**: Fixed exit codes (0=success, 1=error, 2=security issue) and comprehensive FAQ documentation
- ‚úÖ **v0.2.10**: Verified `--quickstart`, `--stats`, and `--config` functionality
- ‚úÖ **v0.2.1-v0.2.8**: Core features including detector fixes, direct file checking, Claude Code integration, and structured logging

### Quality Check Summary:
- ‚úÖ **pytest**: 140/140 tests passing (74% code coverage) - All tests are stable
- ‚úÖ **ruff**: All style issues fixed
- ‚ö†Ô∏è **mypy**: 81 type errors remaining (future version)
- ‚ö†Ô∏è **src-check**: Score 49.9/100 - See "Code Quality Improvements" section for detailed issues

## Project Vision

Transform antimon from a standalone script into a robust, extensible Python package that can be easily integrated into various AI coding assistant workflows and CI/CD pipelines.

### Version 0.2.12 (User Experience) - COMPLETED (2025-07-22)

#### Completed:
- [x] Success message improvements (show what was checked)
- [x] Fixed duplicate output bug in verbose mode
- [x] Implemented --version flag properly
- [x] Enhanced --stats flag with meaningful statistics
- [x] Fixed JSON error handling
- [x] Standardized output streams
- [x] Fixed quickstart message behavior

### Version 0.2.13 (Batch Processing & JSON) - IN PROGRESS

#### Completed (2025-07-22):
- [x] **Batch File Checking**: `antimon --check-files "src/**/*.py"` with progress indicators
- [x] **JSON Output Format**: `--output-format json` for CI/CD integration

#### TODO:
- [ ] **Brief Mode**: `--brief` for concise security reports
- [ ] **Exit Code Documentation**: Show meaning in error messages
- [ ] **Watch Mode**: `antimon --watch <directory>` for continuous monitoring
- [ ] **Pattern Testing**: `antimon --test-pattern <pattern>` to test detection patterns
- [ ] **Auto-fix Suggestions**: Provide code snippets for common security fixes
- [ ] **Error Recovery Hints**: Always show `--explain-last-error` hint on security detections
- [ ] **Setup Status on First Run**: Show Claude Code integration status on initial execution

#### Documentation:
- [ ] Windows-specific Claude Code setup instructions
- [ ] CI/CD integration examples
- [ ] Common false positive scenarios and solutions

## Version 0.3.0 (Configuration Support)
- [ ] TOML configuration file support (`antimon.toml`)
- [ ] Custom pattern definitions
- [ ] Enable/disable specific detectors
- [ ] Severity levels for detections
- [ ] Whitelist/ignore patterns
- [ ] Global configuration (`~/.config/antimon/antimon.toml`)
- [ ] Environment variable overrides
- [ ] Configuration file validation and schema
- [ ] `.antimonignore` file support for project-specific exclusions
- [ ] `--generate-config` command to create configuration template
- [ ] Configuration inheritance (global ‚Üí project ‚Üí command-line)

## Version 0.4.0 (Enhanced Detection)
- [ ] Additional security patterns:
  - [ ] SQL injection detection
  - [ ] Command injection detection
  - [ ] Path traversal detection
  - [ ] XXE (XML External Entity) detection
  - [ ] SSRF (Server-Side Request Forgery) patterns
- [ ] Language-specific detections:
  - [ ] Python: `eval()`, `exec()`, `__import__`
  - [ ] JavaScript: `eval()`, `Function()`, `innerHTML`
  - [ ] Shell: Command injection patterns
- [ ] Framework-specific patterns

## Version 0.5.0 (Integration Features)
- [ ] Plugin system for custom detectors
- [ ] Pre-commit hook support
- [ ] GitHub Actions integration
- [ ] GitLab CI integration
- [ ] VS Code extension API
- [ ] Reporting formats (SARIF, JUnit XML, HTML, Markdown)

## Version 0.6.0 - 0.9.0 (Advanced Features)
- [ ] **Performance**: Retry mechanisms, offline mode, progress indicators
- [ ] **ML Detection**: Context-aware analysis, dependency scanning, metrics dashboard
- [ ] **Enterprise**: SSO/LDAP, audit logging, RBAC, compliance reporting
- [ ] **Scale**: Distributed scanning, caching, webhooks, REST API
- [ ] **Internationalization (i18n)**: Multi-language support starting with Japanese
- [ ] **Interactive Fix Mode**: `--fix-interactive` to apply suggested fixes with confirmation
- [ ] **Learning Mode**: `--learn` to understand why patterns are dangerous with examples

## Version 1.0.0 (Production Ready)
- [ ] Comprehensive documentation & 100% test coverage
- [ ] Performance benchmarks & security audit
- [ ] Stable API guarantee with LTS commitment
- [ ] Migration guides & professional support

## User Experience Improvement Priorities

### üéØ Based on Comprehensive User Testing (2025-07-22)

#### Phase 1: Immediate UX Improvements (v0.2.14)
- [ ] **First-run Experience Enhancement**: Show Claude Code integration status automatically on first execution
- [ ] **Error Recovery Guidance**: Always append "Run 'antimon --explain-last-error' for details" to security detection messages
- [ ] **Pattern Transparency**: Add `--list-patterns` command to show all active detection patterns
- [ ] **False Positive Reporting**: Add `--report-false-positive` to generate GitHub issue template with context

#### Phase 2: Configuration & Persistence (v0.3.0) 
- [ ] **Project Configuration**: Support `.antimonignore` file for project-specific exclusions
- [ ] **Config Generation**: Add `--generate-config` to create antimon.toml template with all options
- [ ] **Config Discovery**: Show configuration file locations in `--status` output
- [ ] **Team Sharing**: Support config inheritance (global ‚Üí project ‚Üí local ‚Üí CLI args)

#### Phase 3: Developer Workflow (v0.4.0)
- [ ] **Watch Mode**: Implement `antimon --watch <dir>` for real-time monitoring during development
- [ ] **Pattern Testing**: Add `--test-pattern <pattern>` to validate custom detection patterns
- [ ] **IDE Status Bar**: Provide simple API endpoint for IDE extensions to show status
- [ ] **Quick Fix Snippets**: Generate copy-paste ready fixes for common issues

#### Phase 4: Enterprise & Team Features (v0.5.0)
- [ ] **CI/CD Templates**: Provide ready-to-use configs for GitHub Actions, GitLab CI, Jenkins
- [ ] **Audit Trail**: Store detection history locally with `--history` command
- [ ] **Team Dashboards**: Export detection statistics in various formats (JSON, CSV, HTML)
- [ ] **Policy Templates**: Provide industry-specific security policy templates

#### Phase 5: Internationalization (v0.6.0)
- [ ] **Japanese Support**: Full translation of error messages, help text, and documentation
- [ ] **Language Detection**: Auto-detect system locale and use appropriate language
- [ ] **Community Translations**: Framework for community-contributed translations
- [ ] **RTL Support**: Proper support for right-to-left languages

## Next Immediate Tasks

### Version 0.2.13 (Batch Processing & JSON) - Remaining Tasks:
3. **Brief Mode**: `--brief` for concise security reports
4. **Exit Code Documentation**: Show meaning in error messages 
5. **Error Recovery Hints**: Always show `--explain-last-error` hint on security detections

### Version 0.2.14 (Developer Tools):
1. **Watch Mode**: `antimon --watch <directory>` for continuous monitoring
2. **Pattern Testing**: `antimon --test-pattern <pattern>` to test detection patterns
3. **Auto-fix Suggestions**: Provide code snippets for common security fixes
4. **Setup Status on First Run**: Show Claude Code integration status on initial execution

### Critical Code Quality Issues (Must address before v0.3.0):
- [ ] Fix circular dependency risks in 7 files (imports inside functions)
- [ ] Replace os.system in color_utils.py with safer alternative
- [ ] Add basic type hints to public API functions
- [ ] Start converting print statements to logging (at least in core.py)

### Code Quality Improvements (Priority for v0.3.0+):
- [ ] Replace print statements with proper logging throughout codebase (280+ occurrences)
- [ ] Add missing type hints (60+ functions need type hints)
- [ ] Reduce module coupling (split large modules, reduce imports)
  - Refactor modules with >15 external calls
- [ ] Fix high complexity functions (10+ functions exceed complexity limit)
  - cli.py: main() - complexity 31
  - core.py: process_stdin() - complexity 39
  - detectors.py: Multiple functions with complexity >10
- [ ] Improve test coverage from 75% to 85%+
- [ ] Address security concerns:
  - Handle input() safely for Python 2 compatibility

### Documentation Enhancement:
- [ ] Add missing parameter/return documentation for functions
- [ ] Add API documentation
- [ ] Create contributor's guide
- [ ] Add more examples in the examples/ directory


## Long-term Goals

- **Developer Experience**: IDE plugins, debugging tools, plugin API, i18n support
- **Community**: GitHub organization, contribution guidelines, pattern sharing
- **Ecosystem**: Editor plugins (VS Code, IntelliJ, Vim), CI/CD integrations
- **Research**: AI-powered suggestions, automated fixes, pattern learning

## Release Schedule

| Version | Target Date | Focus Area | Status |
|---------|------------|------------|--------|
| 0.2.11 | Released | Critical Fixes (Exit codes & docs) | ‚úÖ Completed |
| 0.2.12 | Released | User Experience | ‚úÖ Completed |
| 0.2.13 | 2025-08-15 | Batch Processing & JSON | üöß Next Release |
| 0.3.0 | 2025-10-01 | Configuration | üìã Planned |
| 0.4.0 | 2026-01-15 | Enhanced detection | üìã Planned |
| 0.5.0 | 2026-04-01 | Integrations | üìã Planned |
| 1.0.0 | 2027-07-01 | Production ready | üéØ Goal |



## Developer-Centric Features

### üõ†Ô∏è Making antimon Developer-Friendly

**Quick Wins**: Shell aliases, editor integrations (VS Code, Vim, Emacs), Git hooks, smart defaults

**Developer Education**: Security learning mode with explanations and pattern playground

_Detailed implementation planned for v0.5.0 (Integration Features) and beyond._

## User Recovery Guidance

### üö® When Detection Occurs - Enhancement Opportunities:

- **Current Strengths**: Clear explanations, quick fixes, best practices, informational links
- **Needed Enhancements**:
  - Show which detector triggered (for allowlisting)
  - Add severity levels
  - Provide copy-paste ready solutions
  - Add "override" instructions
  - Include "why dangerous" explanations
  - Support team exception sharing

_These enhancements are planned for v0.5.0 (Integration Features) and v0.6.0 (ML Detection)._

## Testing Checklist

Before marking any feature as "completed", verify:
- Exit codes work correctly
- Documentation exists for referenced features
- Cross-platform compatibility (Linux/Windows)
- Output stream consistency (stdout/stderr)
- All documented flags work as expected
- No duplicate output in any mode

## User Experience Enhancement Plan

### üéØ Based on User Testing Analysis (2025-07-22)

After comprehensive testing from a user perspective, the following critical issues and enhancements have been identified:

### üîç Critical User Experience Observations

#### 1. **Onboarding Experience**
- **ÁèæÁä∂**: ÂàùÂõûÂÆüË°åÊôÇ„ÅÆ„Ç¨„Ç§„ÉÄ„É≥„Çπ„ÅØÂ≠òÂú®„Åô„Çã„Åå„ÄÅClaude Code„Å®„ÅÆÈÄ£Êê∫Áä∂ÊÖã„Åå‰∏çÊòéÁ¢∫
- **ÂïèÈ°åÁÇπ**: „É¶„Éº„Ç∂„Éº„ÅØ`antimon`„Çí„Ç§„É≥„Çπ„Éà„Éº„É´Âæå„ÄÅÂÆüÈöõ„Å´Âãï‰Ωú„Åó„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç„Åô„ÇãÊñπÊ≥ï„ÅåÂàÜ„Åã„Çä„Å´„Åè„ÅÑ
- **ÊîπÂñÑÊ°à**: 
  - ÂàùÂõûÂÆüË°åÊôÇ„Å´Ëá™ÂãïÁöÑ„Å´`--status`Áõ∏ÂΩì„ÅÆÊÉÖÂ†±„ÇíË°®Á§∫
  - Claude CodeÈÄ£Êê∫„ÅÆÊúâÁÑ°„Å®Ë®≠ÂÆöÊñπÊ≥ï„ÇíÊòéÁ§∫
  - `--test`„ÅÆÂÆüË°å„Çí‰øÉ„Åô„É°„ÉÉ„Çª„Éº„Ç∏„ÇíËøΩÂä†

#### 2. **Error Message Clarity**
- **ÁèæÁä∂**: „Ç®„É©„Éº„É°„ÉÉ„Çª„Éº„Ç∏„ÅØË©≥Á¥∞„Å†„Åå„ÄÅÊ¨°„ÅÆ„Ç¢„ÇØ„Ç∑„Éß„É≥„Åå‰∏çÊòéÁ¢∫
- **ÂïèÈ°åÁÇπ**: `--explain-last-error`„ÅÆÂ≠òÂú®„ÇíÁü•„Çâ„Å™„ÅÑ„É¶„Éº„Ç∂„Éº„ÅåÂ§ö„ÅÑ
- **ÊîπÂñÑÊ°à**:
  - „Åô„Åπ„Å¶„ÅÆ„Çª„Ç≠„É•„É™„ÉÜ„Ç£Ê§úÂá∫„É°„ÉÉ„Çª„Éº„Ç∏„Å´„ÄåË©≥Á¥∞: antimon --explain-last-error„Äç„ÇíËøΩÂä†
  - Ë™§Ê§úÁü•„ÅÆÂ†¥Âêà„ÅÆÂØæÂá¶Ê≥ï„Çí1Ë°å„ÅßÊèêÁ§∫
  - „Çà„Åè‰Ωø„ÅÜ„Ç™„Éó„Ç∑„Éß„É≥Ôºà`--allow-file`, `--dry-run`Ôºâ„ÇíÊèêÊ°à

#### 3. **Pattern Visibility**
- **ÁèæÁä∂**: „Å©„ÅÆ„Çà„ÅÜ„Å™„Éë„Çø„Éº„É≥„ÅßÊ§úÂá∫„Åï„Çå„Çã„Åã„Åå„Éñ„É©„ÉÉ„ÇØ„Éú„ÉÉ„ÇØ„Çπ
- **ÂïèÈ°åÁÇπ**: Ë™§Ê§úÁü•„ÇíÈÅø„Åë„Çã„Åü„ÇÅ„Å´„Å©„ÅÜ„Ç≥„Éº„Éâ„ÇíÊõ∏„Åë„Å∞„Çà„ÅÑ„ÅãÂàÜ„Åã„Çâ„Å™„ÅÑ
- **ÊîπÂñÑÊ°à**:
  - `--list-patterns`„ÅßÂÖ®Ê§úÂá∫„Éë„Çø„Éº„É≥„ÇíË°®Á§∫
  - ÂêÑ„Éë„Çø„Éº„É≥„Å´ÂØæ„Åô„ÇãÂõûÈÅøÊñπÊ≥ï„ÅÆ‰æã„ÇíÊèê‰æõ
  - `--test-pattern`„Åß„Ç´„Çπ„Çø„É†„Éë„Çø„Éº„É≥„ÅÆ„ÉÜ„Çπ„ÉàÊ©üËÉΩ

#### 4. **Team Collaboration**
- **ÁèæÁä∂**: ÂÄã‰∫∫Âçò‰Ωç„Åß„ÅÆË®≠ÂÆö„ÅÆ„ÅøÂèØËÉΩ
- **ÂïèÈ°åÁÇπ**: „ÉÅ„Éº„É†ÂÖ®‰Ωì„ÅßÂêå„ÅòÈô§Â§ñË®≠ÂÆö„ÇíÂÖ±Êúâ„Åß„Åç„Å™„ÅÑ
- **ÊîπÂñÑÊ°à**:
  - `.antimonignore`„Éï„Ç°„Ç§„É´„ÅÆ„Çµ„Éù„Éº„ÉàÔºà`.gitignore`ÂΩ¢ÂºèÔºâ
  - „Éó„É≠„Ç∏„Çß„ÇØ„Éà„É´„Éº„Éà„ÅÆ`antimon.toml`„Åß„ÅÆÂÖ±ÊúâË®≠ÂÆö
  - Ë®≠ÂÆö„ÅÆÂÑ™ÂÖàÈ†Ü‰Ωç: CLIÂºïÊï∞ > „É≠„Éº„Ç´„É´Ë®≠ÂÆö > „Éó„É≠„Ç∏„Çß„ÇØ„ÉàË®≠ÂÆö > „Ç∞„É≠„Éº„Éê„É´Ë®≠ÂÆö

#### 5. **False Positive Management**
- **ÁèæÁä∂**: „Ç≥„Éû„É≥„Éâ„É©„Ç§„É≥ÂºïÊï∞„Åß„ÅÆ‰∏ÄÊôÇÁöÑ„Å™Èô§Â§ñ„ÅÆ„Åø
- **ÂïèÈ°åÁÇπ**: ÊØéÂõûÂêå„ÅòÂºïÊï∞„ÇíÊåáÂÆö„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çã
- **ÊîπÂñÑÊ°à**:
  - Ê§úÂá∫ÊôÇ„Å´„Äå„Åì„ÅÆÊ§úÂá∫„ÇíÊ∞∏Á∂öÁöÑ„Å´ÁÑ°Ë¶ñ: antimon --add-ignore <pattern>„Äç„ÇíË°®Á§∫
  - `--report-false-positive`„ÅßGitHub issue„ÉÜ„É≥„Éó„É¨„Éº„Éà„ÇíËá™ÂãïÁîüÊàê
  - „Çà„Åè„ÅÇ„ÇãË™§Ê§úÁü•„Éë„Çø„Éº„É≥„ÅÆFAQ„Çí`--help-false-positives`„ÅßÊèê‰æõ

### üåü What's Working Well
- **Error Messages**: Exceptionally clear with risks, fixes, and best practices
- **Demo Mode**: Excellent educational tool with 10 practical scenarios
- **Help System**: Well-organized with `--help`, `--quickstart`, `--help-errors`
- **Success Feedback**: Shows useful info (file size, checks performed) - Enhanced in v0.2.12
- **Multiple Input Modes**: Flexible with files, content, and JSON


### üìä Key Usage Patterns
- Primary use: Direct file checking (`--check-file`)
- JSON mode rarely used outside of CI/CD
- Users expect proper exit codes for automation
- Verbose mode used for debugging false positives
- Dry-run mode helpful for testing

### üõ†Ô∏è Developer Experience Enhancements

#### 1. **Integration with Development Workflow**
- **Shell Aliases**: Provide recommended aliases in documentation
  ```bash
  alias amon='antimon --check-file'
  alias amon-watch='antimon --watch .'
  alias amon-fix='antimon --check-file --auto-fix'
  ```
- **Git Hooks**: Pre-commit hook template that runs antimon on staged files
- **Editor Integration**: VS Code extension that shows antimon status in status bar

#### 2. **Learning and Education**
- **Interactive Tutorial**: `antimon --tutorial` with step-by-step security lessons
- **Pattern Playground**: `antimon --playground` to test patterns interactively
- **Security Best Practices**: `antimon --best-practices <topic>` for language-specific guidance

#### 3. **Performance and Efficiency**
- **Incremental Checking**: Only check changed files in watch mode
- **Parallel Processing**: Use multiple cores for batch file checking
- **Caching**: Cache results for unchanged files to speed up repeated runs

#### 4. **Debugging and Troubleshooting**
- **Debug Mode**: `antimon --debug` to show detailed detector execution
- **Pattern Match Visualization**: Show exactly what matched in the code
- **Performance Profiling**: `antimon --profile` to identify slow detectors


## Common User Scenarios & Pain Points

### üîç Key Scenarios Identified:

1. **New User Experience**: Good setup, but needs clearer mode selection guidance
2. **CI/CD Integration**: Working but needs ready-made templates
3. **Development Workflow**: Basic functionality, needs watch mode and IDE plugins
4. **Team Collaboration**: Limited sharing capabilities, needs config files
5. **False Positive Management**: Basic controls, needs persistent allowlists

_Solutions for these scenarios are addressed in the version roadmap sections._


## How to Contribute

1. Check the [Issues](https://github.com/antimon-security/antimon/issues) for tasks
2. Fork the repository
3. Create a feature branch
4. Submit a pull request
5. Join our discussions

## Feedback

We welcome feedback and suggestions! Please open an issue or start a discussion to share your ideas for improving antimon.


